<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Food Tracker</title>
  <link rel="stylesheet" href="vendor/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="vendor/bootstrap/dist/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body ng-app="foodTracker">
	<div class="navbar">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="/">FoodTracker</a>
			</div>
			<div ng-controller="NavbarCtrl" class="navbar-right">
				<form class="navbar-form" ng-hide="identity.isAuthenticated()">
					<div class="form-group">
						<input type="text" placeholder="Username" class="form-control" ng-model="username" />
					</div>
					<div class="form-group">
						<input type="password" placeholder="Password" class="form-control" ng-model="password" />
					</div>
					<div class="form-group">
						<button class="btn btn-primary" ng-click="loginUser(username, password)">
							Sign In
						</button>
					</div>
					<div class="form-group">
						<button class="btn btn-primary" ng-click="showSignupModal()" data-toggle="modal" data-target="#signup-modal">
							Sign Up
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div class="container">
		<section ng-controller="ItemCtrl as vm">
			<div class="container">
				<form ng-submit="vm.onSubmit()">
					<formly-form model="vm.newItem" fields="vm.newItemFields" form="vm.newItemForm">
		        <button type="submit" class="btn btn-primary" ng-disabled="vm.NewItemForm.$invalid">Submit</button>
		    	</formly-form>
	   	 </form>
			</div>
			<div class="container">

				<div class="col-md-8">
					<h2>Food Items</h2>
					<table class="table table-striped table-bordered table-hover table-condensed">
						<tr>
							<th>Name</th>
							<th>Calories</th>
							<th>Fat</th>
							<th>Carbs</th>
							<th>Protein</th>
							<th>Sodium</th>
							<th>Fiber</th>
						</tr>
						<tr ng-repeat="item in selectedItems track by $index">
							<td>{{item.name}} ({{item.portion}})</td>
							<td>{{item.calories}}</td>
							<td>{{item.fat}}</td>
							<td>{{item.carbs}}</td>
							<td>{{item.protein}}</td>
							<td>{{item.sodium}}</td>
							<td>{{item.fiber}}</td>
							<td><button ng-click="deleteItem($index)">Delete</button></td>
						</tr>
						<tr>
							<td></td>
							<td>{{calories}} ({{(calories/dvCalories *100).toFixed(1)}}%)</td>
							<td>{{fat}} ({{(fat/dvFat *100).toFixed(1)}}%)</td>
							<td>{{carbs}} ({{(carbs/dvCarbs *100).toFixed(1)}}%)</td>
							<td>{{protein}} ({{(protein/dvProtein *100).toFixed(1)}}%)</td>
							<td>{{sodium}} ({{(sodium/dvSodium *100).toFixed(1)}}%)</td>
							<td>{{fiber}} ({{(fiber/dvFiber *100).toFixed(1)}}%)</td>
						</tr>
					</table>
				</div>

				<div class="col-md-4">
					<h2>Database List</h2>
					<input type="search" id="item-search" placeholder="Search Items" ng-model="itemSearch" />
					<div class="pre-scrollable">
						<table id="database-items">
							<tr ng-repeat="item in items | orderBy: 'name' | filter: itemSearch track by $index">
								<td ng-click="selectItem(item)">{{item.name}} ({{item.portion}})</td>
								<td><button ng-click="deleteDatabaseItem(item._id)">Delete</button</td>
							</tr>
						</table>
					</div>
				</div>

			</div>
		</section>
	</div>

	<div class="modal" id="signup-modal" ng-controller="SignupCtrl as vm">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">Signup for Foodtracker</div>
				<div class="modal-body">
					<form ng-submit="vm.onSubmit()">
						<formly-form model="vm.newUser" fields="vm.newUserFields" form="vm.newUserForm">
			        <button type="submit" class="btn btn-primary" ng-disabled="vm.NewUserForm.$invalid">Submit</button>
			    	</formly-form>
	   	 		</form>
				</div>
				<div class="modal-footer"></div>
			</div>
		</div>
	</div>

<script src="vendor/api-check/dist/api-check.min.js"></script>
<script src="vendor/angular/angular.min.js"></script>
<script src="vendor/angular-formly/dist/formly.js"></script>
<script src="vendor/angular-formly-templates-bootstrap/dist/angular-formly-templates-bootstrap.js"></script>
<script src="vendor/jquery/dist/jquery.min.js"></script>
<script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>

<script src="app/app.js"></script>
<script src="app/items/ItemCtrl.js"></script>
<script src="app/login/mvIdentity.js"></script>
<script src="app/login/mvAuth.js"></script>
<script src="app/login/NavbarCtrl.js"></script>
<script src="app/login/SignupCtrl.js"></script>

</body>
</html>