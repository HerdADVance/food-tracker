section#my-foods(ng-controller="FoodsCtrl as vm")
	h1 My Foods
	p.intro Use this section to add food items to your database. If you have the nutritional info for a specific food, you can add it in the <strong>Add a New Custom Food Item</strong> area. Otherwise, you can search the <strong>USDA Database</strong> to find the info for the food you're looking for. 
	.accordion
		div(data-toggle="collapse", data-target="#add-food-item")
			span.glyphicon.glyphicon-plus-sign
			h2 Add A New Custom Food Item
		.collapse#add-food-item
			form(ng-submit="vm.onSubmit()")
				formly-form(model="vm.newItem", fields="vm.newItemFields", form="vm.newItemForm")
					button.btn.btn-primary(type="submit", ng-disabled="vm.newItemForm.$invalid") Submit
	.accordion
		div(data-toggle="collapse", data-target="#add-usda-item")
			span.glyphicon.glyphicon-plus-sign
			h2 Add A New Food Item From USDA Database
		.collapse#add-usda-item
			form#usda-search(ng-submit="usdaSearch(usdaSearchTerm)")
				input.form-control(type="text" ng-model="usdaSearchTerm" placeholder="Enter a food")
				button.btn.btn-primary.pull-right(type="submit") Search
			table.usda-results#usda-results
				tr(ng-repeat="item in vm.usdaSearchResult | orderBy: 'name' " ng-click="usdaSelectItem($index, item.ndbno)")
					td {{item.name}}
			table.usda-results.usda-portions
				tr(ng-repeat="item in vm.usdaItemPortions" ng-click="usdaSelectPortion($index)")
					td {{item.qty}} {{item.label}}
	h3.subtitle Existing Foods
	input.pull-right.form-control(type="search", id="item-search", placeholder="Search Items", ng-model="itemSearch")
	table.database-items
		tr
			th Name
			th Portion
			th Calories
			th Fat
			th Carbs
			th Protein
			th Sodium
			th Fiber
			th(colspan="2")
		tr(ng-repeat="item in vm.items | orderBy: 'name' | filter: itemSearch track by $index")
			td
				span.item-name(editable-text="item.name" e-form="textBtnForm") {{item.name}}
			td
				span.portion(editable-text="item.portion" e-form="textBtnForm") {{item.portion}}
			td
				span(editable-number="item.calories" e-form="textBtnForm" onbeforesave="editDatabaseItem(item)") {{item.calories}}
			td
				span(editable-number="item.fat" e-form="textBtnForm") {{item.fat}}
			td 
				span(editable-number="item.carbs" e-form="textBtnForm") {{item.carbs}}
			td 
				span(editable-number="item.protein" e-form="textBtnForm") {{item.protein}}
			td 
				span(editable-number="item.sodium" e-form="textBtnForm") {{item.sodium}}
			td 
				span(editable-number="item.fiber" e-form="textBtnForm") {{item.fiber}}
			td.edit-item(ng-click="textBtnForm.$show()")
				span.glyphicon.glyphicon-edit
			td.delete-item(ng-click="deleteDatabaseItem(item._id)")
				span.glyphicon.glyphicon-remove
